(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"A/5D":function(t,e,i){t.exports=function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(t),r=i(e),o=n.default.helpers,s=function(){if("undefined"!=typeof window)return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),a={resolveOption:(t,e)=>o.valueOrDefault(t.options.realtime[e],t.chart.options.plugins.streaming[e]),startFrameRefreshTimer:function(t,e){if(!t.frameRequestID){var i=function(){e(),t.frameRequestID=o.requestAnimFrame.call(window,i)};t.frameRequestID=o.requestAnimFrame.call(window,i)}},stopFrameRefreshTimer:function(t){var e=t.frameRequestID;e&&(s.call(window,e),delete t.frameRequestID)}};function c(t,e,i){return null!=(n=e)&&("number"==typeof n?isFinite(n):n)?{value:t.getPixelForValue(e),transitionable:!0}:{value:i};var n}var d={attachChart(t){var e,i,r,o,s=t.streaming;s.annotationPlugin||(r=(e=n.default.Annotation.types.box).prototype.configure,o=(i=n.default.Annotation.types.line).prototype.configure,e.prototype.configure=function(){return a=(n=this.chartInstance).chartArea,u=(s=n.scales)[d=(o=this.options).xScaleID],p=s[l=o.yScaleID],h=this._streaming={},u&&(t=c(u,o.xMin,a.left),e=c(u,o.xMax,a.right),i=t.value>e.value,t.transitionable&&(h[i?"right":"left"]={axisId:d}),e.transitionable&&(h[i?"left":"right"]={axisId:d})),p&&(t=c(p,o.yMin,a.top),e=c(p,o.yMax,a.bottom),i=t.value>e.value,t.transitionable&&(h[i?"bottom":"top"]={axisId:l}),e.transitionable&&(h[i?"top":"bottom"]={axisId:l})),r.call(this);var t,e,i,n,o,s,a,d,l,u,p,h},i.prototype.configure=function(){return function(t){var e=t.options,i=e.scaleID,n=e.value,r=t.chartInstance.scales[i],o=t._streaming={};if(r){var s=r.isHorizontal();c(r,n).transitionable&&(o[s?"x1":"y1"]={axisId:i},o[s?"x2":"y2"]={axisId:i},o[s?"labelX":"labelY"]={axisId:i})}}(this),o.call(this)},s.annotationPlugin=!0)},getElements(t){var e=t.annotation;if(e){var i=e.elements;return Object.keys(i).map(function(t){return i[t]})}return[]},detachChart(t){delete t.streaming.annotationPlugin}},l=n.default.helpers,u=n.default.Zoom=n.default.Zoom||{};function p(t,e){if(t.scaleAxes&&t.rangeMax&&!l.isNullOrUndef(t.rangeMax[t.scaleAxes])){var i=t.rangeMax[t.scaleAxes];e>i&&(e=i)}return e}function h(t,e){if(t.scaleAxes&&t.rangeMin&&!l.isNullOrUndef(t.rangeMin[t.scaleAxes])){var i=t.rangeMin[t.scaleAxes];e<i&&(e=i)}return e}function b(t,e,i,n){var r,o,s=t.options.realtime,c=a.resolveOption(t,"duration"),d=a.resolveOption(t,"delay"),l=c*(2-e);r=t.isHorizontal()?(t.right-i.x)/(t.right-t.left):(t.bottom-i.y)/(t.bottom-t.top),o=e<1?p(n,l):h(n,l),s.duration=o,s.delay=d+r*(c-o)}function m(t,e,i){var n=t.options.realtime,r=a.resolveOption(t,"delay")+(t.getValueForPixel(e)-t.getValueForPixel(0));n.delay=e>0?p(i,r):h(i,r)}u.zoomFunctions=u.zoomFunctions||{},u.panFunctions=u.panFunctions||{};var f={attachChart(t){var e=t.streaming;e.zoomPlugin||(u.zoomFunctions.realtime=b,u.panFunctions.realtime=m,e.resetZoom=t.resetZoom,function(t){var e=t.$zoom||{_originalOptions:{}},i=t.resetZoom,n=t.update,r=function(){l.each(t.scales,function(t){var i=t.options.realtime,n=e._originalOptions[t.id]||t.originalOptions;i&&(n?(i.duration=n.realtime.duration,i.delay=n.realtime.delay):(delete i.duration,delete i.delay))}),n.call(t,{duration:0})};t.resetZoom=function(){t.update=r,i(),t.update=n}}(t),e.zoomPlugin=!0)},detachChart(t){var e=t.streaming;e.zoomPlugin&&(t.resetZoom=e.resetZoom,delete e.resetZoom,delete e.zoomPlugin)}},g=n.default.helpers,v=g.canvas,O=n.default.scaleService,y=O.getScaleConstructor("time");O.getScaleConstructor=function(t){return"time"===t&&(t="realtime"),this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0};var k=Number.MAX_SAFE_INTEGER||9007199254740991,x={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},w=Object.keys(x),C={parse:function(t,e){return"string"==typeof t&&"string"==typeof e?t=r.default(t,e):t instanceof r.default||(t=r.default(t)),t.isValid()?t.valueOf():null},add:function(t,e,i){return r.default(t).add(e,i).valueOf()},startOf:function(t,e,i){return t=r.default(t),"isoWeek"===e?t.isoWeekday(i).valueOf():t.startOf(e).valueOf()}};function _(t,e){if(g.isNullOrUndef(e))return null;var i=t.options.time,n=function(t,e){var i=t._adapter||C,n=t.options.time,r=n.parser,o=r||n.format,s=e;return"function"==typeof r&&(s=r(s)),("number"==typeof s||s instanceof Number)&&isFinite(s)||(s="string"==typeof o?i.parse(s,o):i.parse(s)),null!==s?+s:(r||"function"!=typeof o||("number"==typeof(s=o(e))||s instanceof Number)&&isFinite(s)||(s=i.parse(s)),s)}(t,t.getRightValue(e));return null===n||i.round&&(n=+(t._adapter||C).startOf(n,i.round)),n}function S(t,e,i,n){var r,o=t._adapter||C,s=t.options,a=s.time,c=a.unit||function(t,e,i,n){var r,o,s=w.length;for(r=w.indexOf(t);r<s-1;++r)if((o=x[w[r]]).common&&Math.ceil((i-e)/((o.steps?o.steps[o.steps.length-1]:k)*o.size))<=n)return w[r];return w[s-1]}(a.minUnit,e,i,n),d=function(t){for(var e=w.indexOf(t)+1,i=w.length;e<i;++e)if(x[w[e]].common)return w[e]}(c),l=g.valueOrDefault(a.stepSize,a.unitStepSize),u="week"===c&&a.isoWeekday,p=s.ticks.major.enabled,h=x[c],b=e,m=i,f=[];for(l||(l=function(t,e,i,n){var r,o,s,a=e-t,c=x[i],d=c.size,l=c.steps;if(!l)return Math.ceil(a/(n*d));for(r=0,o=l.length;r<o&&(s=l[r],!(Math.ceil(a/(d*s))<=n));++r);return s}(e,i,c,n)),u&&(b=+o.startOf(b,"isoWeek",u),m=+o.startOf(m,"isoWeek",u)),b=+o.startOf(b,u?"day":c),(m=+o.startOf(m,u?"day":c))<i&&(m=+o.add(m,1,c)),r=b,p&&d&&!u&&!a.round&&(r=+o.startOf(r,d),r=+o.add(r,~~((b-r)/(h.size*l))*l,c));r<m;r=+o.add(r,l,c))f.push(+r);return f.push(+r),f}var T=["pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","pointRotation","pointStyle","pointHitRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointHoverRadius","backgroundColor","borderColor","borderSkipped","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","radius","rotation"];function j(t){var e=t.realtime,i=e.refreshTimerID;i&&(clearInterval(i),delete e.refreshTimerID,delete e.refreshInterval)}function D(t){var e=t.realtime,i=a.resolveOption(t,"refresh");e.refreshTimerID=setInterval(function(){var i=a.resolveOption(t,"refresh");(function(t){var e,i,n,r,o,s,c,d=t.chart,l=t.id,u=a.resolveOption(t,"duration"),p=a.resolveOption(t,"delay"),h=a.resolveOption(t,"ttl"),b=a.resolveOption(t,"pause"),m=a.resolveOption(t,"onRefresh"),f=t.max,v=Date.now()-(isNaN(h)?u+p:h);m&&m(d),g.each(d.data.datasets,function(a,u){if(e=d.getDatasetMeta(u),l===e.xAxisID||l===e.yAxisID){if(n=(i=a.data).length,b){for(r=0;r<n&&t._getTimeForIndex(r,u)<f;++r);o=r+2}else o=0;for(r=o;r<n&&t._getTimeForIndex(r,u)<=v;++r);s=r-o,isNaN(h)&&(s=Math.max(s-2,0)),i.splice(o,s),g.each(T,function(t){g.isArray(a[t])&&a[t].splice(o,s)}),g.each(a.datalabels,function(t){g.isArray(t)&&t.splice(o,s)}),"object"!=typeof i[0]&&(c={start:o,count:s})}}),c&&d.data.labels.splice(c.start,c.count),d.update({preservation:!0})})(t),e.refreshInterval===i||isNaN(i)||(j(t),D(t))},i),e.refreshInterval=i}function I(t,e,i){var n=t._start||{},r=t._view||{},o=t._model||{};g.each(t._streaming,(t,s)=>{t.axisId===e&&(n.hasOwnProperty(s)&&(n[s]-=i),r.hasOwnProperty(s)&&r!==n&&(r[s]-=i),o.hasOwnProperty(s)&&o!==r&&(o[s]-=i))})}function M(t){var e,i,n=t.chart,r=t.realtime,o=t.id,s=a.resolveOption(t,"duration"),c=a.resolveOption(t,"delay"),l=t.isHorizontal(),u=l?t.width:t.height,p=Date.now(),h=t.options.ticks.reverse||!(l||"_reversePixels"in t),b=n.tooltip,m=d.getElements(n),f=u*(p-r.head)/s;for(l===h&&(f=-f),g.each(n.data.datasets,function(t,r){var s=n.getDatasetMeta(r),a=s.data||[],c=s.dataset;for(e=0,i=a.length;e<i;++e)I(a[e],o,f);c&&I(c,o,f)}),e=0,i=m.length;e<i;++e)I(m[e],o,f);I(b,o,f),t.max=t._table[1].time=p-c,t.min=t._table[0].time=t.max-s,r.head=p}var N=y.extend({initialize:function(){var t=this;y.prototype.initialize.apply(t,arguments),("time"!==t.options.type||t.chart.options.plugins.streaming)&&(t.realtime=t.realtime||{},D(t))},update:function(){var t,e=this,i=e.realtime,n=e.options,r=n.bounds,o=n.distribution,s=n.offset,c=n.ticks,d=c.autoSkip,l=c.source,u=c.min,p=c.max,h=c.major,b=h.enabled;return"time"!==n.type||e.chart.options.plugins.streaming?(a.resolveOption(e,"pause")?a.stopFrameRefreshTimer(i):(a.startFrameRefreshTimer(i,function(){M(e)}),i.head=Date.now()),n.bounds=void 0,n.distribution="linear",n.offset=!1,c.autoSkip=!1,c.source="auto"===l?"":l,c.min=-1e15,c.max=1e15,h.enabled=!0,t=y.prototype.update.apply(e,arguments),n.bounds=r,n.distribution=o,n.offset=s,c.autoSkip=d,c.source=l,c.min=u,c.max=p,h.enabled=b,t):y.prototype.update.apply(e,arguments)},buildTicks:function(){var t=this,e=t.options;if("time"===e.type&&!t.chart.options.plugins.streaming)return y.prototype.buildTicks.apply(t,arguments);var i,n=a.resolveOption(t,"duration"),r=a.resolveOption(t,"delay"),o=a.resolveOption(t,"refresh"),s=e.ticks,c=s.source,d=t._timestamps.data,l=t.realtime.head-r,u=l-n,p=[l+o,l];return""===c&&(s.source="data",t._timestamps.data=S(t,u,l+o,t.getLabelCapacity(u))),Object.defineProperty(t,"min",{get:function(){return u},set:g.noop}),Object.defineProperty(t,"max",{get:function(){return p.shift()},set:g.noop}),i=y.prototype.buildTicks.apply(t,arguments),delete t.min,delete t.max,t.min=u,t.max=l,""===c&&(s.source=c,t._timestamps.data=d),t._table=[{time:u,pos:0},{time:l,pos:1}],i},calculateTickRotation:function(){var t=this,e=t.options,i=e.ticks,n=i.maxRotation;"time"!==e.type||t.chart.options.plugins.streaming?(i.maxRotation=i.minRotation||0,y.prototype.calculateTickRotation.apply(t,arguments),i.maxRotation=n):y.prototype.calculateTickRotation.apply(t,arguments)},fit:function(){var t=this,e=t.options;y.prototype.fit.apply(t,arguments),("time"!==e.type||t.chart.options.plugins.streaming)&&e.ticks.display&&e.display&&t.isHorizontal()&&(t.paddingLeft=3,t.paddingRight=3,t.handleMargins())},draw:function(t){var e=this,i=e.chart;if("time"!==e.options.type||i.options.plugins.streaming){var n=e.ctx,r=e.isHorizontal()?{left:t.left,top:0,right:t.right,bottom:i.height}:{left:0,top:t.top,right:i.width,bottom:t.bottom};e._gridLineItems=null,e._labelItems=null,v.clipArea(n,r),y.prototype.draw.apply(e,arguments),v.unclipArea(n)}else y.prototype.draw.apply(e,arguments)},destroy:function(){var t=this;("time"!==t.options.type||t.chart.options.plugins.streaming)&&(a.stopFrameRefreshTimer(t.realtime),j(t))},_getTimeForIndex:function(t,e){var i,n=this,r=n._timestamps,o=r.datasets[e][t];return g.isNullOrUndef(o)&&(o=g.isObject(i=n.chart.data.datasets[e].data[t])?_(n,i):_(n,r.labels[t])),o}});O.registerScaleType("realtime",N,{position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},realtime:{},ticks:{autoSkip:!1,source:"auto",major:{enabled:!0}}});var P=n.default.helpers,B=P.canvas;function E(t,e,i){var n={};return P.each(e.x,function(t){n[t]={axisId:i.xAxisID}}),P.each(e.y,function(t){n[t]={axisId:i.yAxisID}}),n}n.default.defaults.global.plugins.streaming={duration:1e4,delay:0,frameRate:30,refresh:1e3,onRefresh:null,pause:!1,ttl:void 0},n.default.defaults.global.legend.onClick=function(t,e){var i=e.datasetIndex,n=this.chart,r=n.getDatasetMeta(i);r.hidden=null===r.hidden?!n.data.datasets[i].hidden:null,n.update({duration:0})};var A={x:["x","controlPointPreviousX","controlPointNextX","caretX"],y:["y","controlPointPreviousY","controlPointNextY","caretY"]};function R(t){var e,i,r,o,s,a,c=this,d=t&&t.preservation;d&&(i=c.lastActive,r=(e=c.tooltip)._lastActive,c._bufferedRender=!0,(s=c.legend)&&(a=s.update,s.update=P.noop)),n.default.prototype.update.apply(c,arguments),d&&(c._bufferedRender=!1,c._bufferedRequest=null,c.lastActive=i,e._lastActive=r,s&&(s.update=a),c.animating?n.default.animationService.animations.forEach(function(t){t.chart===c&&c.render({duration:16.66*(t.numSteps-t.currentStep)})}):c.data.datasets.forEach(function(t,e){c.getDatasetMeta(e).controller.transition(1)}),e._active&&e.update(!0),(o=c.streaming.lastMouseEvent)&&c.eventHandler(o))}function F(){var t,e=this,i=e._active&&e._active[0];return i?(t=e._chart.getDatasetMeta(i._datasetIndex),e._streaming=E(0,A,t)):e._streaming={},n.default.Tooltip.prototype.update.apply(e,arguments)}var z={id:"streaming",beforeInit:function(t){var e=t.streaming=t.streaming||{},i=e.canvas=t.canvas,n=e.mouseEventListener=function(i){var n=P.getRelativePosition(i,t);e.lastMouseEvent={type:"mousemove",chart:t,native:i,x:n.x,y:n.y}};i.addEventListener("mousedown",n),i.addEventListener("mouseup",n)},afterInit:function(t){t.update=R,t.tooltip.update=F},beforeUpdate:function(t){var e=t.options,i=e.scales;return i&&P.each(i.xAxes.concat(i.yAxes),function(t){"realtime"!==t.type&&"time"!==t.type||(e.elements.line.capBezierPoints=!1)}),t.annotation?d.attachChart(t):d.detachChart(t),t.resetZoom?f.attachChart(t):f.detachChart(t),!0},afterUpdate:function(t){var e=t.streaming,i=!0;(function(t){P.each(t.data.datasets,function(e,i){var n,r,o=t.getDatasetMeta(i),s=o.data||[],a=o.dataset;for(n=0,r=s.length;n<r;++n)s[n]._streaming=E(0,A,o);a&&(a._streaming=E(0,A,o))})})(t),P.each(t.scales,function(t){t instanceof N&&(i&=a.resolveOption(t,"pause"))}),i?a.stopFrameRefreshTimer(e):a.startFrameRefreshTimer(e,function(){!function(t){var e=t.streaming,i=1e3/(Math.max(t.options.plugins.streaming.frameRate,0)||30),n=e.lastDrawn+i||0,r=Date.now(),o=e.lastMouseEvent;n<=r&&(t.animating||t.tooltip._start||t.draw(),o&&t.eventHandler(o),e.lastDrawn=n+i>r?n:r)}(t)})},beforeDatasetDraw:function(t,e){var i=e.meta,n=t.chartArea,r={left:0,top:0,right:t.width,bottom:t.height};return i.xAxisID&&i.controller.getScaleForId(i.xAxisID)instanceof N&&(r.left=n.left,r.right=n.right),i.yAxisID&&i.controller.getScaleForId(i.yAxisID)instanceof N&&(r.top=n.top,r.bottom=n.bottom),B.clipArea(t.ctx,r),!0},afterDatasetDraw:function(t){B.unclipArea(t.ctx)},beforeEvent:function(t,e){var i=t.streaming;return"mousemove"===e.type?i.lastMouseEvent=e:"mouseout"===e.type&&delete i.lastMouseEvent,!0},destroy:function(t){var e=t.streaming,i=e.canvas,n=e.mouseEventListener;a.stopFrameRefreshTimer(e),delete t.update,delete t.tooltip.update,i.removeEventListener("mousedown",n),i.removeEventListener("mouseup",n),P.each(t.scales,function(t){t instanceof N&&t.destroy()})}};return n.default.helpers.streaming=a,n.default.plugins.register(z),z}(i("MO+k"),i("wd/R"))},D8XL:function(t,e,i){"use strict";i.r(e),i.d(e,"TradingModule",function(){return At});var n=i("ofXK"),r=i("tyNb"),o=i("P+IX"),s=i("fXoL"),a=i("tqRt");const c=Object(a.p)("[Trading-Trade] Trading starting"),d=Object(a.p)("[Trading-Trade] Trading started"),l=Object(a.p)("[Trading-Trade] Trade payload",Object(a.v)()),u=Object(a.p)("[Trading-Trade] Trading ending"),p=Object(a.p)("[Trading-Trade] Trading ended");Object(a.p)("[Trading-Trade] Trading Error",Object(a.v)());var h=function(t){return t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.DISCONNECTING=3]="DISCONNECTING",t}({});const b={connected:h.DISCONNECTED,trades:[],lastTrade:[]},m=Object(a.r)(b,Object(a.u)(c,t=>Object.assign(Object.assign({},t),{connected:h.CONNECTING})),Object(a.u)(d,t=>Object.assign(Object.assign({},t),{connected:h.CONNECTED})),Object(a.u)(p,t=>Object.assign(Object.assign({},t),{connected:h.DISCONNECTED,trades:b.trades})),Object(a.u)(u,t=>Object.assign(Object.assign({},t),{connected:h.DISCONNECTING})),Object(a.u)(l,(t,e)=>Object.assign(Object.assign({},t),{lastTrade:[...e.trades],trades:[...t.trades,...e.trades]})));function f(t,e){return m(t,e)}const g=Object(a.p)("[Trading-Book] Book starting"),v=Object(a.p)("[Trading-Book] Book started"),O=Object(a.p)("[Trading-Book] Book snapshot",Object(a.v)()),y=Object(a.p)("[Trading-Book] Book update",Object(a.v)()),k=Object(a.p)("[Trading-Book] Book ending"),x=Object(a.p)("[Trading-Book] Book ended");Object(a.p)("[Trading-Book] Book Error",Object(a.v)());var w=function(t){return t[t.price=0]="price",t[t.volume=1]="volume",t[t.timestamp=2]="timestamp",t}({});const C=Array.from({length:10},t=>new Array(3).fill(0)),_={connected:h.DISCONNECTED,bid:C,ask:C,error:""};function S(t,e,i=!1,n=10){if(!e)return t;let r=[...t];return i&&r.reverse(),e.forEach(t=>{let e=[...t.map(t=>+t)];e.length>3&&e.pop();const n=+t[w.price],o=+t[w.volume];if(t.length>3)i?r.unshift(e):r.push(e);else{const t=r.findIndex(t=>n<=t[w.price]);-1===t?r.push(e):0===o?r.splice(t,1):r.splice(t,r[t][w.price]===n?1:0,e)}}),i&&r.reverse(),r=r.slice(0,n),r}const T=Object(a.r)(_,Object(a.u)(g,t=>Object.assign(Object.assign({},t),{connected:h.CONNECTING})),Object(a.u)(v,t=>Object.assign(Object.assign({},t),{connected:h.CONNECTED})),Object(a.u)(x,t=>Object.assign(Object.assign({},t),{connected:h.DISCONNECTED})),Object(a.u)(k,t=>Object.assign(Object.assign({},t),{connected:h.DISCONNECTING})),Object(a.u)(O,(t,e)=>Object.assign(Object.assign({},t),{bid:[...e.book.bs.map(t=>t.map(t=>+t))],ask:[...e.book.as.map(t=>t.map(t=>+t))]})),Object(a.u)(y,(t,e)=>Object.assign(Object.assign({},t),{bid:S(t.bid,e.book.b,!0),ask:S(t.ask,e.book.a)})));function j(t,e){return T(t,e)}const D="trading";function I(t,e){return Object(a.n)({trades:f,book:j})(t,e)}const M=Object(a.q)(D),N=Object(a.s)(M,t=>t.trades),P=(Object(a.s)(N,t=>t.connected),Object(a.s)(N,t=>t.trades),Object(a.s)(N,t=>t.lastTrade)),B=Object(a.s)(M,t=>t.book),E=(Object(a.s)(B,t=>t.connected),Object(a.s)(B,t=>t.ask)),A=Object(a.s)(B,t=>t.bid);i("A/5D");var R=i("LPYB");const F=["tradeChart"];let z=(()=>{class t{constructor(){this.datasets=[{label:"Bitcoin ($)",fill:!1,backgroundColor:"rgba(0, 0, 0)",borderColor:"rgba(255,243,222)",data:[],lineTension:0,yAxisID:"left-axis"},{label:"Volume",data:[],type:"bar",yAxisID:"right-axis",barThickness:3}],this.lineChartOptions={responsive:!0,title:{display:!1,text:""},scales:{xAxes:[{type:"realtime",realtime:{duration:6e4,refresh:200,delay:100,pause:!1,ttl:12e4},gridLines:{color:"rgb(200,200,200,0.5)",display:!0}}],yAxes:[{type:"linear",position:"left",display:!0,id:"left-axis",gridLines:{color:"rgb(200,200,200,0.5)",display:!0}},{type:"linear",id:"right-axis",position:"right",stacked:!1,display:!0,gridLines:{drawOnChartArea:!1},ticks:{min:0}}]},elements:{point:{radius:3,hitRadius:4}}}}ngAfterViewInit(){this.subscription=this.trades.subscribe(t=>{this.lastTrade=[...t];let e=0;t.forEach(t=>{this.datasets[0].data.push({x:1e3*+t.time,y:+t.price}),e!==1e3*+t.time?(this.datasets[1].data.push({x:1e3*+t.time,y:+t.volume}),e=1e3*+t.time):this.datasets[1].data[this.datasets[1].data.length-1].y+=+t.volume}),this.tradeChart.update("none")})}ngOnInit(){}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-trade-chart"]],viewQuery:function(t,e){if(1&t&&s.Ac(F,1),2&t){let t;s.nc(t=s.cc())&&(e.tradeChart=t.first)}},inputs:{trades:"trades"},decls:3,vars:3,consts:[[1,"trading-chart"],["baseChart","",3,"chartType","datasets","options"],["tradeChart","base-chart"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Pb(1,"canvas",1,2),s.Tb()),2&t&&(s.Db(1),s.kc("chartType","line")("datasets",e.datasets)("options",e.lineChartOptions))},directives:[R.a],styles:[".trading-chart[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;top:0;left:0}"]}),t})(),$=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.store.dispatch(c()),this.lastTrade$=this.store.select(P)}ngOnDestroy(){this.store.dispatch(u())}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.i))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-trade-chart-container"]],decls:1,vars:1,consts:[[3,"trades"]],template:function(t,e){1&t&&s.Pb(0,"app-trade-chart",0),2&t&&s.kc("trades",e.lastTrade$)},directives:[z],styles:["app-trade-chart[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();var U=i("Kj3r"),Y=i("OaSA");function W(t,e){1&t&&(s.Ub(0,"th",8),s.xc(1," $ "),s.Tb())}function L(t,e){if(1&t&&(s.Ub(0,"td",9),s.xc(1),s.fc(2,"number"),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.zc(" ",s.hc(2,1,t[0],"1.2-5")," ")}}function H(t,e){1&t&&(s.Ub(0,"th",8),s.xc(1," # "),s.Tb())}function q(t,e){if(1&t&&(s.Ub(0,"td",9),s.xc(1),s.fc(2,"number"),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.zc(" ",s.hc(2,1,t[1],"1.5-5")," ")}}function X(t,e){1&t&&(s.Ub(0,"th",8),s.xc(1," Date/Time "),s.Tb())}function G(t,e){if(1&t&&(s.Ub(0,"td",9),s.xc(1),s.fc(2,"date"),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.zc(" ",s.hc(2,1,1e3*t[2],"mediumTime")," ")}}function Z(t,e){1&t&&s.Pb(0,"tr",10)}function V(t,e){1&t&&s.Pb(0,"tr",11)}let K=(()=>{class t{constructor(){this.orderBook=[][3],this.isBid=!1,this.displayedColumns=["price","volume","date"]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-order-book"]],inputs:{orderBook:"orderBook",isBid:"isBid"},decls:14,vars:6,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","volume"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"h4"),s.xc(1),s.Tb(),s.Ub(2,"table",0),s.Sb(3,1),s.wc(4,W,2,0,"th",2),s.wc(5,L,3,4,"td",3),s.Rb(),s.Sb(6,4),s.wc(7,H,2,0,"th",2),s.wc(8,q,3,4,"td",3),s.Rb(),s.Sb(9,5),s.wc(10,X,2,0,"th",2),s.wc(11,G,3,4,"td",3),s.Rb(),s.wc(12,Z,1,0,"tr",6),s.wc(13,V,1,0,"tr",7),s.Tb()),2&t&&(s.Db(1),s.yc(e.isBid?"Buy":"Sell"),s.Db(1),s.Gb("bid-group",e.isBid),s.kc("dataSource",e.orderBook),s.Db(10),s.kc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.kc("matRowDefColumns",e.displayedColumns))},directives:[Y.j,Y.c,Y.e,Y.b,Y.g,Y.i,Y.d,Y.a,Y.f,Y.h],pipes:[n.e,n.d],styles:[".mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:0 .2rem;text-align:center}.mat-header-cell[_ngcontent-%COMP%]{color:wheat}.mat-cell[_ngcontent-%COMP%]{color:red}mat-footer-row[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-color:wheat}.bid-group[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{color:#0f0}h4[_ngcontent-%COMP%]{text-align:center;color:wheat;margin:1rem .2rem .2rem}@media screen and (min-width:1200px){h4[_ngcontent-%COMP%]{margin-top:2rem}}td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding:0 .5rem}tr.mat-header-row[_ngcontent-%COMP%], tr.mat-row[_ngcontent-%COMP%]{height:1.5rem}table[_ngcontent-%COMP%]{font-family:Inconsolata,monospace;background:#000;border-color:wheat;width:100%;min-width:220px}"]}),t})(),J=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.askBook$=this.store.select(E).pipe(Object(U.a)(100)),this.bidBook$=this.store.select(A).pipe(Object(U.a)(100)),this.store.dispatch(g())}ngOnDestroy(){this.store.dispatch(k())}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.i))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-order-book-container"]],decls:2,vars:4,consts:[[3,"isBid","orderBook"]],template:function(t,e){1&t&&(s.Pb(0,"app-order-book",0),s.Pb(1,"app-order-book",0)),2&t&&(s.kc("isBid",!0)("orderBook",e.bidBook$),s.Db(1),s.kc("isBid",!1)("orderBook",e.askBook$))},directives:[K],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}app-order-book[_ngcontent-%COMP%]{padding:0 1rem}@media screen and (min-width:1200px){[_nghost-%COMP%]{flex-direction:row}}"]}),t})();const Q=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-trading"]],decls:3,vars:0,consts:[[1,"trading-section"]],template:function(t,e){1&t&&(s.Ub(0,"section",0),s.Pb(1,"app-trade-chart-container"),s.Pb(2,"app-order-book-container"),s.Tb())},directives:[$,J],styles:["[_nghost-%COMP%]{background:#000;display:flex;justify-content:stretch;width:100%;flex-direction:column;min-height:100%;padding-bottom:1rem}.trading-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.trading-section[_ngcontent-%COMP%]   app-trade-chart-container[_ngcontent-%COMP%]{width:80%;min-height:15rem;display:flex;flex-direction:column;align-items:center;margin-top:1rem;position:relative}@media screen and (min-width:1200px){[_nghost-%COMP%]{height:100%}.trading-section[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start;flex-wrap:wrap;justify-content:center}.trading-section[_ngcontent-%COMP%]   app-trade-chart-container[_ngcontent-%COMP%]{width:45%}.trading-section[_ngcontent-%COMP%]   app-order-book-container[_ngcontent-%COMP%]{padding-left:1rem}}"]}),t})(),canActivate:[o.a]}];let tt=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(Q)],r.i]}),t})();var et=i("7bNT"),it=i("vkgz"),nt=i("XNiG"),rt=i("7o/Q"),ot=i("HDdC"),st=i("quSY"),at=i("jtHE");const ct={url:"",deserializer:t=>JSON.parse(t.data),serializer:t=>JSON.stringify(t)};class dt extends nt.a{constructor(t,e){if(super(),t instanceof ot.a)this.destination=e,this.source=t;else{const e=this._config=Object.assign({},ct);if(this._output=new nt.b,"string"==typeof t)e.url=t;else for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);if(!e.WebSocketCtor&&WebSocket)e.WebSocketCtor=WebSocket;else if(!e.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new at.a}}lift(t){const e=new dt(this._config,this.destination);return e.operator=t,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new at.a),this._output=new nt.b}multiplex(t,e,i){const n=this;return new ot.a(r=>{try{n.next(t())}catch(s){r.error(s)}const o=n.subscribe(t=>{try{i(t)&&r.next(t)}catch(s){r.error(s)}},t=>r.error(t),()=>r.complete());return()=>{try{n.next(e())}catch(s){r.error(s)}o.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:t,protocol:e,url:i,binaryType:n}=this._config,r=this._output;let o=null;try{o=e?new t(i,e):new t(i),this._socket=o,n&&(this._socket.binaryType=n)}catch(a){return void r.error(a)}const s=new st.a(()=>{this._socket=null,o&&1===o.readyState&&o.close()});o.onopen=t=>{const{_socket:e}=this;if(!e)return o.close(),void this._resetState();const{openObserver:i}=this._config;i&&i.next(t);const n=this.destination;this.destination=rt.a.create(e=>{if(1===o.readyState)try{const{serializer:t}=this._config;o.send(t(e))}catch(t){this.destination.error(t)}},t=>{const{closingObserver:e}=this._config;e&&e.next(void 0),t&&t.code?o.close(t.code,t.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:t}=this._config;t&&t.next(void 0),o.close(),this._resetState()}),n&&n instanceof at.a&&s.add(n.subscribe(this.destination))},o.onerror=t=>{this._resetState(),r.error(t)},o.onclose=t=>{this._resetState();const{closeObserver:e}=this._config;e&&e.next(t),t.wasClean?r.complete():r.error(t)},o.onmessage=t=>{try{const{deserializer:e}=this._config;r.next(e(t))}catch(e){r.error(e)}}}_subscribe(t){const{source:e}=this;return e?e.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add(()=>{const{_socket:t}=this;0===this._output.observers.length&&(t&&1===t.readyState&&t.close(),this._resetState())}),t)}unsubscribe(){const{_socket:t}=this;t&&1===t.readyState&&t.close(),this._resetState(),super.unsubscribe()}}var lt=i("AytR"),ut=i("2Vo4"),pt=i("EY2u"),ht=i("PqYM"),bt=i("eIep"),mt=i("SpAZ"),ft=i("JIr8"),gt=i("zx2A");class vt{constructor(t,e){this.notifier=t,this.source=e}call(t,e){return e.subscribe(new Ot(t,this.notifier,this.source))}}class Ot extends gt.b{constructor(t,e,i){super(t),this.notifier=e,this.source=i}error(t){if(!this.isStopped){let i=this.errors,n=this.retries,r=this.retriesSubscription;if(n)this.errors=void 0,this.retriesSubscription=void 0;else{i=new nt.b;try{const{notifier:t}=this;n=t(i)}catch(e){return super.error(e)}r=Object(gt.c)(n,new gt.a(this))}this._unsubscribeAndRecycle(),this.errors=i,this.retries=n,this.retriesSubscription=r,i.next(t)}}_unsubscribe(){const{errors:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:t}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}var yt=i("l7GE"),kt=i("ZUHj");class xt{constructor(t){this.delayDurationSelector=t}call(t,e){return e.subscribe(new wt(t,this.delayDurationSelector))}}class wt extends yt.a{constructor(t,e){super(t),this.delayDurationSelector=e,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(t,e,i,n,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()}notifyError(t,e){this._error(t)}notifyComplete(t){const e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}_next(t){const e=this.index++;try{const i=this.delayDurationSelector(t,e);i&&this.tryDelay(i,t)}catch(i){this.destination.error(i)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(t){t.unsubscribe();const e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}tryDelay(t,e){const i=Object(kt.a)(this,t,e);i&&!i.closed&&(this.destination.add(i),this.delayNotifierSubscriptions.push(i))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}const Ct=Object(a.p)("[Trading Traffic] new traffic",Object(a.v)()),_t=Object(a.p)("[Trading Traffic] Traffic Cop unhandled traffic",Object(a.v)()),St=lt.a.BITCOIN_WEBSOCKET_URL,Tt=lt.a.BITCOIN_RECONNECT_INTERVAL;let jt=(()=>{class t{constructor(t){this.store=t,this.messagesSubject$=new ut.a(null),this.messages$=this.messagesSubject$.pipe(Object(bt.a)(mt.a),Object(ft.a)(t=>{throw t})),this.subscription=null,this.bookStarted=!1,this.tradeStarted=!1}connect(t={reconnect:!1}){if(!this.socket$||this.socket$.closed){this.socket$=this.getNewWebSocket();const e=this.socket$.pipe(t.reconnect?this.reconnect:t=>t,Object(it.a)({error:t=>console.log(t)}),Object(ft.a)(t=>pt.a));this.messagesSubject$.next(e)}}reconnect(t){return t.pipe((e=t=>{return t.pipe(Object(it.a)(t=>console.log("[TradingService] Try to reconnect",t)),(e=t=>Object(ht.a)(Tt),t=>t.lift(new xt(e))));var e},t=>t.lift(new vt(e,t))));var e}close(){this.socket$.complete(),this.socket$=void 0}sendMessage(t){this.socket$.next(t)}getNewWebSocket(){return new dt({url:St,openObserver:{next:()=>{}},closeObserver:{next:()=>{var t;null===(t=this.socket$)||void 0===t||t.complete(),this.socket$=void 0,this.tradeStarted=!1,this.bookStarted=!1,this.store.dispatch(p()),this.store.dispatch(x())}}})}startTradeFeed(){this.tradeStarted=!0,this.connect(),this.checkSubscription(),this.sendMessage({event:"subscribe",pair:["XBT/USD"],subscription:{name:"trade"}})}checkSubscription(){this.subscription||(this.subscription=this.messages$.subscribe(t=>{this.store.dispatch(Ct({data:t}))}))}stopTradeFeed(){this.sendMessage({event:"unsubscribe",pair:["XBT/USD"],subscription:{name:"trade"}}),this.tradeStarted=!1,this.bookStarted||this.tradeStarted||this.close()}startBookFeed(){this.bookStarted=!0,this.connect(),this.checkSubscription(),this.sendMessage({event:"subscribe",pair:["XBT/USD"],subscription:{name:"book"}})}stopBookFeed(){this.sendMessage({event:"unsubscribe",pair:["XBT/USD"],subscription:{name:"book"}}),this.bookStarted=!1,this.bookStarted||this.tradeStarted||this.close()}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(a.i))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dt=(()=>{class t{constructor(t,e){this.actions$=t,this.service=e,this.connectTrade$=Object(et.d)(()=>this.actions$.pipe(Object(et.e)(c),Object(it.a)(()=>this.service.startTradeFeed())),{dispatch:!1}),this.disconnectTrade$=Object(et.d)(()=>this.actions$.pipe(Object(et.e)(u),Object(it.a)(()=>this.service.stopTradeFeed())),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(et.a),s.Yb(jt))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var It=i("lJxs"),Mt=function(t){return t.Book="book-10",t.Trade="trade",t}({}),Nt=function(t){return t.Ping="ping",t.Pong="pong",t.Heartbeat="heartbeat",t.SystemStatus="systemStatus",t.Subscribe="subscribe",t.Unsubscribe="unsubscribe",t.SubscriptionStatus="subscriptionStatus",t}({});let Pt=(()=>{class t{constructor(t){this.actions$=t,this.trafficCopEffect$=Object(et.d)(()=>this.actions$.pipe(Object(et.e)(Ct),Object(It.a)(t=>{var e,i,n,r;if(Array.isArray(t.data))switch(t.data[t.data.length-2]){case Mt.Trade:const e=t.data[1].map(t=>({price:t[0],volume:t[1],time:t[2],side:t[3],orderType:t[4],misc:t[5]}));return l({trades:e});case Mt.Book:const i=t.data[1];if((null==i?void 0:i.as)&&(null==i?void 0:i.bs))return O({book:i});if((null==i?void 0:i.a)||(null==i?void 0:i.b))return y({book:i})}else{const o=t.data;if(null==o?void 0:o.event)switch(o.event){case Nt.SubscriptionStatus:if((null==o?void 0:o.status)==Nt.Subscribe){if((null===(e=null==o?void 0:o.subscription)||void 0===e?void 0:e.name)==Mt.Trade)return d();if((null===(i=null==o?void 0:o.subscription)||void 0===i?void 0:i.name)==Mt.Book)return v()}else if((null==o?void 0:o.status)==Nt.Unsubscribe){if((null===(n=null==o?void 0:o.subscription)||void 0===n?void 0:n.name)==Mt.Trade)return p();if((null===(r=null==o?void 0:o.subscription)||void 0===r?void 0:r.name)==Mt.Book)return x()}}}return _t({data:t.data})})))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(et.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Bt=i("pKmL");let Et=(()=>{class t{constructor(t,e){this.actions$=t,this.service=e,this.connectBook$=Object(et.d)(()=>this.actions$.pipe(Object(et.e)(g),Object(it.a)(()=>this.service.startBookFeed())),{dispatch:!1}),this.disconnectBook$=Object(et.d)(()=>this.actions$.pipe(Object(et.e)(k),Object(it.a)(()=>this.service.stopBookFeed())),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(et.a),s.Yb(jt))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),At=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.b,tt,a.k.forFeature(D,I),et.b.forFeature([Pt,Dt,Et]),Bt.a,R.b]]}),t})()}}]);